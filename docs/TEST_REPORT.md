# 테스트 리포트 - 스마트 쇼핑 카트 시스템

## 1. 테스트 개요

**프로젝트명:** AI 기반 제품 인식 스마트 쇼핑 카트  
**버전:** v2.0  
**테스트 일자:**  
**테스트 환경:** 3-PC 구성 (AI 서버, Main Hub, UI 클라이언트)  
**테스터:**

---

## 2. 테스트 환경 설정

### 하드웨어 구성
- **PC1 (AI Server):** YOLOv8 추론, 듀얼 카메라 처리
- **PC2 (Main Hub):** 중앙 오케스트레이션, 데이터베이스 연동
- **PC3 (UI Client):** PyQt6 GUI 애플리케이션

### 소프트웨어 스택
- Python 3.x
- PyQt6 (GUI 프레임워크)
- OpenCV (카메라 처리)
- YOLOv8 (객체 인식)
- MySQL/AWS RDS (데이터베이스)
- TCP/UDP 네트워킹

### 카메라 설정
- 카메라 0: 내장 카메라 (제품 인식)
- 카메라 2: USB 웹캠 (장애물 감지)
- ROI 설정: entry_threshold=0.55, trigger_threshold=0.70, min_movement=80px
- 쿨다운: 3초

### 네트워크 설정
- AI Server: TCP 5000, UDP 5001
- Main Hub: TCP 6002/7000, UDP 6000/6001
- UI Client: TCP 7001

---

## 3. 테스트 케이스

### 3.1 시스템 초기화 테스트

#### TC-INIT-001: AI 서버 시작
| 항목 | 내용 |
|------|------|
| **테스트 케이스** | AI 서버 초기화 |
| **입력** | `python src/ai_server.py` |
| **예상 결과** | • AI Server listening on TCP 5000 메시지 출력<br>• UDP listener on 5001 활성화<br>• Camera 0, 2 opened successfully 메시지 확인<br>• YOLOv8 model loaded 확인 |
| **통과 조건** | 모든 컴포넌트가 에러 없이 초기화됨 |
| **실제 결과** |  |
| **Pass/Fail** | ⬜ |
| **비고** |  |

#### TC-INIT-002: Main Hub 시작
| 항목 | 내용 |
|------|------|
| **테스트 케이스** | Main Hub 초기화 |
| **입력** | `python src/main_hub.py` |
| **예상 결과** | • TCP server on 6002, 7000 메시지 출력<br>• UDP listeners on 6000, 6001 활성화<br>• Database connection established 확인<br>• session_id=None (자동 세션 생성 안 됨) |
| **통과 조건** | 모든 리스너 활성화, DB 연결 성공 |
| **실제 결과** |  |
| **Pass/Fail** | ⬜ |
| **비고** |  |

#### TC-INIT-003: UI 애플리케이션 시작
| 항목 | 내용 |
|------|------|
| **테스트 케이스** | Cart UI 애플리케이션 실행 |
| **입력** | `python src/cart_ui_app_v2.py` |
| **예상 결과** | • PyQt6 윈도우 열림 (1024x768)<br>• STANDBY 화면 표시<br>• "쇼핑 시작" 버튼 활성화<br>• TCP connection to Main Hub:7001 연결됨 |
| **통과 조건** | UI가 STANDBY 상태로 정상 렌더링됨 |
| **실제 결과** |  |
| **Pass/Fail** | ⬜ |
| **비고** |  |

---

### 3.2 세션 관리 테스트

#### TC-SESSION-001: 쇼핑 세션 시작
| 항목 | 내용 |
|------|------|
| **테스트 케이스** | 사용자가 쇼핑 세션 시작 |
| **입력** | UI에서 "쇼핑 시작" 버튼 클릭 |
| **예상 결과** | • UI가 `{"command": "START_SESSION"}` 메시지를 Main Hub로 전송<br>• Main Hub가 DB에 세션 생성<br>• Main Hub가 `{"status": "success", "session_id": 123, "cart_id": 1}` 응답<br>• UI가 SHOPPING 상태로 전환<br>• 쇼핑 타이머 시작<br>• 장바구니 테이블 초기화 |
| **통과 조건** | • shopping_sessions 테이블에 레코드 생성됨<br>• UI가 session_id 수신함<br>• 화면 상태가 SHOPPING으로 변경됨 |
| **실제 결과** |  |
| **Pass/Fail** | ⬜ |
| **비고** |  |

#### TC-SESSION-002: 세션 ID 동기화
| 항목 | 내용 |
|------|------|
| **테스트 케이스** | 컴포넌트 간 세션 ID 일관성 확인 |
| **입력** | UI가 세션 시작, AI가 제품 감지 |
| **예상 결과** | • UI의 session_id와 Main Hub의 session_id 일치<br>• AI 이벤트가 활성 세션에서 처리됨<br>• 세션 불일치 에러 없음 |
| **통과 조건** | 모든 컴포넌트가 동일한 session_id 사용 |
| **실제 결과** |  |
| **Pass/Fail** | ⬜ |
| **비고** |  |

---

### 3.3 제품 인식 테스트

#### TC-PROD-001: ROI 기반 모션 트리거
| 항목 | 내용 |
|------|------|
| **테스트 케이스** | 제품이 ROI 트리거 존에 진입 |
| **입력** | • 제품을 프레임에 넣음<br>• entry threshold (y > 55%) 통과<br>• trigger threshold (y > 70%) 도달<br>• 움직임 > 80px |
| **예상 결과** | • 객체가 "entry" 존에서 추적됨<br>• 트리거 통과 시 상태가 "added"로 변경<br>• 인식 쿨다운(3초) 활성화<br>• 주황색 바운딩 박스 표시 |
| **통과 조건** | 트리거 threshold를 넘을 때만 제품 감지됨 |
| **실제 결과** |  |
| **Pass/Fail** | ⬜ |
| **비고** |  |

#### TC-PROD-002: 제품 분류
| 항목 | 내용 |
|------|------|
| **테스트 케이스** | AI가 제품 분류 |
| **입력** | 트리거 존의 제품 이미지 |
| **예상 결과** | • YOLOv8 추론 실행<br>• 제품 클래스 감지 (예: "coca-cola")<br>• 신뢰도 점수 > threshold<br>• 데이터베이스에서 제품 ID 조회됨 |
| **통과 조건** | 정확한 제품 클래스가 >70% 신뢰도로 감지됨 |
| **실제 결과** |  |
| **Pass/Fail** | ⬜ |
| **비고** |  |

#### TC-PROD-003: 장바구니에 추가
| 항목 | 내용 |
|------|------|
| **테스트 케이스** | 감지된 제품이 장바구니에 추가됨 |
| **입력** | AI Server가 `{"command": "PRODUCT_DETECTED", "product_id": 101, "cart_code": "CART-001", "detected_class": "coca-cola"}` 전송 |
| **예상 결과** | • Main Hub가 UDP로 이벤트 수신<br>• cart_items 테이블에 항목 추가<br>• UI가 TCP로 업데이트 수신<br>• 제품이 장바구니 테이블에 나타남<br>• 녹색 토스트 알림: "[제품명] 추가됨"<br>• LED 표시등 ON |
| **통과 조건** | • cart_items 레코드 생성됨<br>• UI에 제품명, 가격, 수량 표시됨<br>• 소계 업데이트됨 |
| **실제 결과** |  |
| **Pass/Fail** | ⬜ |
| **비고** |  |

#### TC-PROD-004: 중복 방지
| 항목 | 내용 |
|------|------|
| **테스트 케이스** | 쿨다운 시간 내 같은 제품 감지 |
| **입력** | 첫 감지 후 3초 이내에 동일 제품 감지 시도 |
| **예상 결과** | • 인식 상태가 "cooldown" 유지<br>• 중복 이벤트 발생하지 않음<br>• 추가 cart_items 레코드 생성 안 됨 |
| **통과 조건** | 쿨다운 기간 동안 1개 항목만 추가됨 |
| **실제 결과** |  |
| **Pass/Fail** | ⬜ |
| **비고** |  |

#### TC-PROD-005: 여러 제품 추가
| 항목 | 내용 |
|------|------|
| **테스트 케이스** | 순차적 제품 추가 |
| **입력** | 제품 A 추가, 3초 대기, 제품 B 추가 |
| **예상 결과** | • 두 제품 모두 cart_items에 추가됨<br>• UI 장바구니 테이블에 2개 행 표시<br>• 소계 = 가격_A + 가격_B<br>• 각 제품마다 녹색 토스트 알림 |
| **통과 조건** | 모든 제품이 독립적으로 추적됨 |
| **실제 결과** |  |
| **Pass/Fail** | ⬜ |
| **비고** |  |

---

### 3.4 장애물 감지 테스트

#### TC-OBST-001: 장애물 감지
| 항목 | 내용 |
|------|------|
| **테스트 케이스** | 카메라 뷰에 장애물 나타남 |
| **입력** | Camera 0(장애물 감지)로 물체 감지 |
| **예상 결과** | • AI Server가 `{"command": "OBSTACLE_DETECTED", "cart_code": "CART-001", "detected_class": "person", "confidence": 0.85}` 전송<br>• Main Hub가 UDP:6000으로 수신<br>• obstacle_logs 테이블에 로그 기록 |
| **통과 조건** | obstacle_logs에 타임스탬프와 클래스가 기록됨 |
| **실제 결과** |  |
| **Pass/Fail** | ⬜ |
| **비고** |  |

#### TC-OBST-002: 알람 알림
| 항목 | 내용 |
|------|------|
| **테스트 케이스** | UI에 장애물 알람 표시 |
| **입력** | Main Hub가 `{"command": "SHOW_ALARM", "data": {"detected_class": "person", "confidence": 0.85}}` 전송 |
| **예상 결과** | • UI가 TCP로 알람 수신<br>• 빨간색 토스트 알림: "장애물 감지: person"<br>• LED 표시등 RED로 변경<br>• 알람 3초간 표시 |
| **통과 조건** | 감지 즉시 알람 표시됨 |
| **실제 결과** |  |
| **Pass/Fail** | ⬜ |
| **비고** |  |

---

### 3.5 장바구니 관리 테스트

#### TC-CART-001: 장바구니 항목 제거
| 항목 | 내용 |
|------|------|
| **테스트 케이스** | 사용자가 수동으로 항목 제거 |
| **입력** | • 장바구니 테이블에서 행 선택<br>• "제거" 버튼 클릭 |
| **예상 결과** | • UI가 `{"command": "REMOVE_ITEM", "cart_item_id": 5}` Main Hub로 전송<br>• Main Hub가 cart_items에서 삭제<br>• UI 테이블에서 행 제거<br>• 소계 재계산<br>• 토스트 알림: "[제품명] 제거됨" |
| **통과 조건** | DB와 UI에서 항목 제거됨 |
| **실제 결과** |  |
| **Pass/Fail** | ⬜ |
| **비고** |  |

#### TC-CART-002: 빈 장바구니 결제 방지
| 항목 | 내용 |
|------|------|
| **테스트 케이스** | 항목 없이 결제 시도 |
| **입력** | 빈 장바구니 상태에서 "쇼핑 끝" 버튼 클릭 |
| **예상 결과** | • "쇼핑 끝" 버튼 비활성화됨<br>• 결제 대화상자 나타나지 않음 |
| **통과 조건** | 장바구니가 비었을 때 결제 불가 |
| **실제 결과** |  |
| **Pass/Fail** | ⬜ |
| **비고** |  |

#### TC-CART-003: 실시간 소계 계산
| 항목 | 내용 |
|------|------|
| **테스트 케이스** | 소계가 동적으로 업데이트됨 |
| **입력** | 3개 항목 추가: 항목 A (₩1000), 항목 B (₩1500), 항목 C (₩2000) |
| **예상 결과** | • 항목 A 추가 후: 소계 = ₩1,000<br>• 항목 B 추가 후: 소계 = ₩2,500<br>• 항목 C 추가 후: 소계 = ₩4,500<br>• 각 추가 후 소계 레이블 업데이트 |
| **통과 조건** | 소계가 항상 장바구니 항목 합계와 일치 |
| **실제 결과** |  |
| **Pass/Fail** | ⬜ |
| **비고** |  |

---

### 3.6 결제 프로세스 테스트

#### TC-CHKT-001: 결제 시작
| 항목 | 내용 |
|------|------|
| **테스트 케이스** | 사용자가 쇼핑 종료 클릭 |
| **입력** | • 장바구니에 3개 항목 (소계 ₩4,500)<br>• "쇼핑 끝" 버튼 클릭 |
| **예상 결과** | • 결제 대화상자 열림<br>• 표시: 총액 ₩4,500, 항목 수: 3<br>• "결제 진행"과 "취소" 버튼 표시 |
| **통과 조건** | 대화상자가 정확한 총액과 항목 수 표시 |
| **실제 결과** |  |
| **Pass/Fail** | ⬜ |
| **비고** |  |

#### TC-CHKT-002: 결제 완료
| 항목 | 내용 |
|------|------|
| **테스트 케이스** | 사용자가 결제 확인 |
| **입력** | 결제 대화상자에서 "결제 진행" 클릭 |
| **예상 결과** | • UI가 `{"command": "CHECKOUT", "session_id": 123}` Main Hub로 전송<br>• Main Hub가 장바구니 항목 조회 및 주문 생성<br>• orders 테이블에 주문 생성, order_details에 항목별 레코드 생성<br>• 세션 종료 (end_time 설정)<br>• UI가 성공 응답 수신하고 STANDBY로 전환<br>• 성공 토스트: "결제가 완료되었습니다"<br>• 쇼핑 타이머 리셋 |
| **통과 조건** | • orders 테이블에 정확한 total_amount와 total_items가 있는 레코드 존재<br>• order_details 테이블에 snap_price가 있는 모든 항목<br>• shopping_sessions에서 세션 종료됨<br>• UI가 STANDBY 상태로 복귀 |
| **실제 결과** |  |
| **Pass/Fail** | ⬜ |
| **비고** |  |

#### TC-CHKT-003: 결제 취소
| 항목 | 내용 |
|------|------|
| **테스트 케이스** | 사용자가 결제 취소 |
| **입력** | • 결제 대화상자 열기<br>• "취소" 버튼 클릭 |
| **예상 결과** | • 대화상자 닫힘<br>• UI가 SHOPPING 상태 유지<br>• 장바구니 항목 변경 없음<br>• 데이터베이스 변경 없음 |
| **통과 조건** | 세션 계속됨, 주문 생성 안 됨 |
| **실제 결과** |  |
| **Pass/Fail** | ⬜ |
| **비고** |  |

#### TC-CHKT-004: 주문 데이터 무결성
| 항목 | 내용 |
|------|------|
| **테스트 케이스** | 결제 후 주문 데이터 확인 |
| **입력** | 결제 후 orders와 order_details 테이블 쿼리 |
| **예상 결과** | • orders.total_amount = (가격 × 수량)의 합<br>• orders.total_items = 장바구니 항목 수<br>• order_details.snap_price = 현재 제품 가격<br>• order_details 레코드 수 = cart_items 수 일치 |
| **통과 조건** | 모든 금융 데이터 정확함, 0 값 없음 |
| **실제 결과** |  |
| **Pass/Fail** | ⬜ |
| **비고** |  |

---

### 3.7 데이터베이스 테스트

#### TC-DB-001: 제품 조회
| 항목 | 내용 |
|------|------|
| **테스트 케이스** | 감지된 클래스로 제품 조회 |
| **입력** | `ProductDAO.get_by_name("coca-cola")` |
| **예상 결과** | • Product 객체 반환<br>• 필드: id, name, category_id, price, stock, image_url |
| **통과 조건** | 정확한 제품 데이터 조회됨 |
| **실제 결과** |  |
| **Pass/Fail** | ⬜ |
| **비고** |  |

#### TC-DB-002: 세션 생성
| 항목 | 내용 |
|------|------|
| **테스트 케이스** | 새 쇼핑 세션 생성 |
| **입력** | `TransactionDAO.start_session(cart_id=1)` |
| **예상 결과** | • shopping_sessions에 새 레코드<br>• start_time = 현재 타임스탬프<br>• end_time = NULL<br>• session_id 반환 |
| **통과 조건** | session_id 반환됨, 레코드 생성됨 |
| **실제 결과** |  |
| **Pass/Fail** | ⬜ |
| **비고** |  |

#### TC-DB-003: 장바구니 항목 추가
| 항목 | 내용 |
|------|------|
| **테스트 케이스** | 활성 장바구니에 제품 추가 |
| **입력** | `TransactionDAO.add_to_cart(cart_id=1, product_id=101, quantity=1)` |
| **예상 결과** | • cart_items에 새 레코드<br>• 필드: cart_id, product_id, quantity, added_at |
| **통과 조건** | 레코드 성공적으로 삽입됨 |
| **실제 결과** |  |
| **Pass/Fail** | ⬜ |
| **비고** |  |

#### TC-DB-004: 소계와 함께 장바구니 항목 조회
| 항목 | 내용 |
|------|------|
| **테스트 케이스** | 장바구니 소계 계산 |
| **입력** | `TransactionDAO.list_cart_items(cart_id=1)` |
| **예상 결과** | • 제품 상세와 함께 장바구니 항목 목록<br>• 소계 = (가격 × 수량)의 합<br>• 삭제된 항목 제외 |
| **통과 조건** | 정확한 소계 계산 |
| **실제 결과** |  |
| **Pass/Fail** | ⬜ |
| **비고** |  |

#### TC-DB-005: 상세 내역과 함께 주문 생성
| 항목 | 내용 |
|------|------|
| **테스트 케이스** | 완전한 주문 생성 |
| **입력** | `TransactionDAO.create_order(cart_id=1, total_amount=4500, total_items=3)` 후 `add_order_detail()` 호출 |
| **예상 결과** | • orders 레코드 생성<br>• 각 항목에 대한 order_details 레코드<br>• 주문 시점의 snap_price 캡처됨 |
| **통과 조건** | 올바른 관계로 모든 레코드 생성됨 |
| **실제 결과** |  |
| **Pass/Fail** | ⬜ |
| **비고** |  |

#### TC-DB-006: 장애물 로깅
| 항목 | 내용 |
|------|------|
| **테스트 케이스** | 장애물 감지 로그 기록 |
| **입력** | `ObstacleLogDAO.add_log(cart_id=1, detected_class="person", confidence=0.85)` |
| **예상 결과** | • obstacle_logs에 레코드<br>• 타임스탬프 = 현재 시간<br>• 카트 및 감지 정보 저장 |
| **통과 조건** | 로그 항목 성공적으로 생성됨 |
| **실제 결과** |  |
| **Pass/Fail** | ⬜ |
| **비고** |  |

---

### 3.8 네트워크 통신 테스트

#### TC-NET-001: TCP 길이 접두사 프로토콜
| 항목 | 내용 |
|------|------|
| **테스트 케이스** | UI가 Main Hub로 명령 전송 |
| **입력** | `{"command": "START_SESSION"}` |
| **예상 결과** | • 4바이트 길이 접두사 추가 (big-endian)<br>• 형식: `[len][json_payload]`<br>• Main Hub가 정확히 파싱<br>• UI가 응답 수신 |
| **통과 조건** | 파싱 에러 없음, 명령 실행됨 |
| **실제 결과** |  |
| **Pass/Fail** | ⬜ |
| **비고** |  |

#### TC-NET-002: UDP 제품 이벤트
| 항목 | 내용 |
|------|------|
| **테스트 케이스** | AI Server가 UDP로 제품 감지 전송 |
| **입력** | Main Hub:6001로 UDP 패킷 전송 |
| **예상 결과** | • Main Hub가 UDP 리스너에서 수신<br>• JSON 정확히 파싱됨<br>• 이벤트 즉시 처리됨 |
| **통과 조건** | 100ms 이내 이벤트 수신됨 |
| **실제 결과** |  |
| **Pass/Fail** | ⬜ |
| **비고** |  |

#### TC-NET-003: 멀티스레드 통신
| 항목 | 내용 |
|------|------|
| **테스트 케이스** | 동시 TCP와 UDP 메시지 |
| **입력** | • UI가 TCP 명령 전송<br>• AI가 동시에 UDP 이벤트 전송 |
| **예상 결과** | • 두 메시지 모두 독립적으로 처리됨<br>• 블로킹이나 데드락 없음<br>• 응답 정확히 전송됨 |
| **통과 조건** | 모든 메시지가 손실 없이 처리됨 |
| **실제 결과** |  |
| **Pass/Fail** | ⬜ |
| **비고** |  |

#### TC-NET-004: 네트워크 연결 끊김 처리
| 항목 | 내용 |
|------|------|
| **테스트 케이스** | Main Hub를 사용할 수 없게 됨 |
| **입력** | Main Hub 프로세스 중지 |
| **예상 결과** | • UI가 연결 에러 토스트 표시<br>• UI가 재연결 시도<br>• 크래시나 데이터 손실 없음 |
| **통과 조건** | 우아한 에러 처리 |
| **실제 결과** |  |
| **Pass/Fail** | ⬜ |
| **비고** |  |

---

### 3.9 UI/UX 테스트

#### TC-UI-001: 상태 전환
| 항목 | 내용 |
|------|------|
| **테스트 케이스** | 모든 UI 상태 탐색 |
| **입력** | STANDBY → SHOPPING → Checkout Dialog → STANDBY |
| **예상 결과** | • 상태 간 부드러운 전환<br>• 각 상태에서 올바른 컴포넌트 표시<br>• UI 글리치나 겹침 없음 |
| **통과 조건** | 모든 상태가 올바르게 렌더링됨 |
| **실제 결과** |  |
| **Pass/Fail** | ⬜ |
| **비고** |  |

#### TC-UI-002: 토스트 알림
| 항목 | 내용 |
|------|------|
| **테스트 케이스** | 여러 토스트 메시지 표시 |
| **입력** | 3개 제품 빠르게 추가 |
| **예상 결과** | • 3개 녹색 토스트 나타남<br>• 각각 3초 후 페이드아웃<br>• 메시지 겹침 없음<br>• 토스트 세로로 쌓임 |
| **통과 조건** | 모든 토스트 표시되고 정확히 페이드됨 |
| **실제 결과** |  |
| **Pass/Fail** | ⬜ |
| **비고** |  |

#### TC-UI-003: LED 표시등
| 항목 | 내용 |
|------|------|
| **테스트 케이스** | LED 색상 변경 |
| **입력** | • 정상: 제품 추가<br>• 알람: 장애물 감지 |
| **예상 결과** | • 제품 추가 시 녹색 LED<br>• 장애물 감지 시 빨간색 LED<br>• 색상 즉시 변경 |
| **통과 조건** | LED가 시스템 상태 반영 |
| **실제 결과** |  |
| **Pass/Fail** | ⬜ |
| **비고** |  |

#### TC-UI-004: 쇼핑 타이머
| 항목 | 내용 |
|------|------|
| **테스트 케이스** | 타이머 정확도 |
| **입력** | 쇼핑 시작, 65초 대기 |
| **예상 결과** | • 타이머가 "01:05" 표시<br>• 형식: MM:SS<br>• 매초 업데이트 |
| **통과 조건** | 타이머 정확히 증가 |
| **실제 결과** |  |
| **Pass/Fail** | ⬜ |
| **비고** |  |

#### TC-UI-005: 장바구니 테이블 렌더링
| 항목 | 내용 |
|------|------|
| **테스트 케이스** | 장바구니 항목 표시 |
| **입력** | 5개 다른 제품이 있는 장바구니 |
| **예상 결과** | • 5개 행 모두 표시<br>• 열: 제품명, 가격, 수량<br>• 가격이 ₩와 쉼표로 형식화됨<br>• 10개 이상일 경우 스크롤 가능 |
| **통과 조건** | 테이블이 모든 항목 정확히 렌더링 |
| **실제 결과** |  |
| **Pass/Fail** | ⬜ |
| **비고** |  |

---

## 4. 통합 테스트 시나리오

### 시나리오 1: 전체 쇼핑 플로우

**테스트 단계:**
1. 3개 서버 모두 시작 (AI, Main Hub, UI)
2. "쇼핑 시작" 버튼 클릭
3. 3개 제품 카트에 넣기 (coca-cola, sprite, water)
4. 1개 항목 제거 (sprite)
5. "쇼핑 끝" 클릭
6. 결제 확인

**예상 결과:**
- 고유 ID로 세션 생성됨
- 3개 제품 감지 및 추가됨
- 1개 제품 성공적으로 제거됨
- 최종 장바구니: 2개 항목
- total_amount = sum(coca-cola + water)로 주문 생성됨
- order_details에 정확한 snap_price로 2개 레코드
- 세션 종료됨 (end_time 설정)
- UI가 STANDBY로 복귀

**실제 결과:**

**Pass/Fail:** ⬜

**비고:**

---

### 시나리오 2: 쇼핑 중 장애물 감지

**테스트 단계:**
1. 쇼핑 세션 시작
2. 장바구니에 2개 제품 추가
3. 장애물 감지 트리거 (Camera 0에 사람 지나감)
4. 쇼핑 계속, 1개 제품 더 추가
5. 결제 완료

**예상 결과:**
- 장애물 이전 제품들 추가됨
- 장애물에 대한 빨간색 토스트 나타남
- obstacle_logs 테이블에 로그됨
- 쇼핑 정상적으로 계속됨
- 장애물 이후 제품 추가됨
- 3개 항목 모두로 결제 완료

**실제 결과:**

**Pass/Fail:** ⬜

**비고:**

---

### 시나리오 3: 빠른 제품 추가

**테스트 단계:**
1. 쇼핑 세션 시작
2. 30초 이내에 5개 제품 빠르게 카트에 넣기
3. 쿨다운이 중복 방지하는지 확인
4. 데이터베이스 일관성 확인

**예상 결과:**
- 5개 제품 모두 감지됨 (쿨다운 준수)
- cart_items에 중복 항목 없음
- UI에 5개 고유 항목 표시
- 소계 정확함
- 각 제품마다 녹색 토스트

**실제 결과:**

**Pass/Fail:** ⬜

**비고:**

---

### 시나리오 4: 네트워크 복구

**테스트 단계:**
1. 쇼핑 세션 시작
2. 1개 제품 추가
3. Main Hub 프로세스 종료
4. Main Hub 재시작
5. 다른 제품 추가 시도

**예상 결과:**
- UI가 연결 에러 표시
- UI가 재연결 시도
- 재연결 후 새 세션 필요할 수 있음
- 크래시나 데이터 손상 없음

**실제 결과:**

**Pass/Fail:** ⬜

**비고:**

---

### 시나리오 5: 데이터베이스 정리 및 재시작

**테스트 단계:**
1. `python cleanup_db.py` 실행
2. 모든 서버 시작
3. 전체 쇼핑 플로우 완료
4. 데이터 무결성 확인

**예상 결과:**
- 모든 트랜잭션 테이블 정리됨
- 마스터 데이터 (products, categories, carts) 보존됨
- 새 세션이 ID=1로 시작
- 주문 정확히 생성됨

**실제 결과:**

**Pass/Fail:** ⬜

**비고:**

---

## 5. 성능 메트릭

| 메트릭 | 목표 | 실제 | Pass/Fail |
|--------|------|------|-----------|
| 제품 인식 지연시간 | < 500ms |  | ⬜ |
| 데이터베이스 쿼리 시간 | < 100ms |  | ⬜ |
| UI 응답 시간 | < 200ms |  | ⬜ |
| 네트워크 메시지 지연 | < 100ms |  | ⬜ |
| 카메라 FPS | ≥ 20 FPS |  | ⬜ |
| 결제 완료 시간 | < 2s |  | ⬜ |

---

## 6. 테스트 실행 명령어

### 모든 서비스 시작
```bash
# Terminal 1: AI Server
python src/ai_server.py

# Terminal 2: Main Hub
python src/main_hub.py

# Terminal 3: UI Application
python src/cart_ui_app_v2.py
```

### 데이터베이스 정리 (테스트 전)
```bash
python cleanup_db.py
```

### 모든 프로세스 종료 (테스트 후)
```bash
pkill -f "python.*ai_server.py|python.*main_hub.py|python.*cart_ui_app"
```

---

## 7. 알려진 이슈 및 제약사항

### 현재 제약사항
1. ⚠️ **단일 카트 지원** - 시스템이 현재 한 번에 하나의 카트만 처리
2. ⚠️ **네트워크 의존성** - 모든 PC가 동일 서브넷에 있어야 함
3. ⚠️ **카메라 특정** - 하드코딩된 카메라 인덱스 (0, 2)는 시스템마다 다를 수 있음
4. ⚠️ **사용자 인증 없음** - 로그인/로그아웃 메커니즘 미구현
5. ⚠️ **제한적 에러 복구** - 네트워크 실패 시 수동 재시작 필요

---

## 8. 테스트 커버리지 요약

| 컴포넌트 | 테스트 케이스 | 통과 | 실패 | 보류 |
|----------|--------------|------|------|------|
| 시스템 초기화 | 3 |  |  |  |
| 세션 관리 | 2 |  |  |  |
| 제품 인식 | 5 |  |  |  |
| 장애물 감지 | 2 |  |  |  |
| 장바구니 관리 | 3 |  |  |  |
| 결제 프로세스 | 4 |  |  |  |
| 데이터베이스 | 6 |  |  |  |
| 네트워크 통신 | 4 |  |  |  |
| UI/UX | 5 |  |  |  |
| **총계** | **34** |  |  |  |

---

## 9. 개선 권장사항

### 프로덕션 배포를 위한 권장사항
1. **멀티 카트 지원** - cart_code 기반 라우팅 구현
2. **인증 시스템** - UI 접근을 위한 사용자 로그인 추가
3. **향상된 에러 복구** - 지수 백오프를 사용한 자동 재연결
4. **로깅 개선** - ELK 스택을 사용한 중앙집중식 로깅
5. **모니터링 대시보드** - 실시간 시스템 헬스 모니터링
6. **카메라 자동 감지** - 동적 카메라 인덱스 발견
7. **부하 테스트** - 시스템이 여러 동시 카트를 처리하는지 확인
8. **보안 강화** - 네트워크 통신 암호화, 모든 입력 검증

### 향후 개선사항
1. **모바일 앱 통합** - 고객용 스마트폰 인터페이스
2. **결제 게이트웨이 연동** - 실제 결제 처리
3. **재고 관리** - 재고 수준 자동 업데이트
4. **분석 대시보드** - 쇼핑 패턴 분석
5. **음성 피드백** - 제품 추가 시 오디오 확인
6. **바코드 스캐너** - 인식 안 되는 제품을 위한 대체 수단

---

## 10. 결론

**전체 테스트 결과:** 

**요약:**


**주요 성과:**


**다음 단계:**


---

**리포트 생성일:**  
**다음 리뷰 예정일:**  
**승인자:**
